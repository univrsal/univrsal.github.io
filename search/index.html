<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<title>start</title>
	<link rel="shortcut icon" href="../assets/img/favicon-alpha.ico" />
</head>

<body id="body">
	<style type="text/css">
		.search-text {
			background-color: #292929;
			border-style: none;
			font-family: monospace;
			font-size: 18px;
			color: white;
			width: 100%;
			padding-top: 8px;
			padding-bottom: 8px;
			padding-left: 8px;

			-webkit-box-shadow: 0px 0px 9px 0px rgba(0,0,0,0.75);
			-moz-box-shadow: 0px 0px 9px 0px rgba(0,0,0,0.75);
			box-shadow: 0px 0px 9px 0px rgba(0,0,0,0.75);
		}

		body {
			background-color: #333333;
			margin: 0px;
			background-repeat: no-repeat;
			-webkit-background-size: cover;
			-moz-background-size: cover;
			-o-background-size: cover;
			background-size: cover;
		}

		.main {
			width: 100%;
			height: 100%;
			margin: 0;
			padding: 0;
		}

		.center-container {
			width: 40%;
			height: 500px;
			position:absolute;
			left:0; right:0;
			top:0; bottom:0;
			margin:auto;
			text-align: center;
		}

		.quick-links > ul {
			list-style: none;
			margin: 5px;
			padding: 0px;
		}

		.quick-links > ul > li {
			font-family: monospace;
			color: white;
			display: inline;
			font-size: 14px;
			margin-left: 5px;
			margin-right: 5px;
		}

		.quick-links > ul > li > a, .config-btn { 
			font-family: monospace;
			color: #9ee2ff;
			text-decoration: none;
			text-shadow: 0px 0px 7px #000000;
		}

		.center-container > img {
			-webkit-filter: drop-shadow(0 0 10px rgba(0,0,0,0.7));
			vertical-align: middle;
			z-index: -1;
			width: 50%;
		}

		.config-btn {
			cursor: pointer;
		}

		.configbar {
			height: 100%;
			width: 250px;
			position: fixed;
			z-index: 1;
			top: 0;
			left: 0;
			background-color: #292929;
			overflow-x: hidden; 
			padding-top: 60px;
			transition: 0.5s; 
			-webkit-box-shadow: 0px 0px 9px 0px rgba(0,0,0,0.75);
			-moz-box-shadow: 0px 0px 9px 0px rgba(0,0,0,0.75);
			box-shadow: 0px 0px 9px 0px rgba(0,0,0,0.75);
		}

		.configbar a, h3 {
			font-family: monospace;
			margin: 4px 4px 4px 32px;
			text-decoration: none;
			font-size: 14px;
			color: #818181;
			transition: 0.3s
		}

		.configbar h3 {
			font-size: 18px;
			margin-bottom: 20px;
			font-weight: normal;
		}

		@media screen and (max-height: 450px) {
			.sidenav {padding-top: 15px;}
			.sidenav a {font-size: 18px;}
		}

		.config-text {
			background-color: #292929;
			border-style: solid;
			border-width: 0px 0px 1px 0px;
			font-family: monospace;
			font-size: 14px;
			color: white;
			width: 70%;
			padding: 4px;
			margin: 8px 8px 8px 32px;
		}

		.save-btn {
			color: white;
			cursor: pointer;
			padding: 3px 10px 3px 10px;
			border-width: 1px;
			border-style: solid;
		}

		.color-input {
			margin: 8px 8px 8px 32px;

		}

		.config-color {
			padding-top: 2px;
		}

		.color-panel {
			margin-top: 2px;
			margin-right: 8px;
			min-height: 15px;
			min-width: 30px;
			width: 30px;
			border-width: 1px;
			border-style: solid;
			background-color: red;
			float: left;
			cursor: pointer;
		}


		.config-color-hex {
			font-family: monospace;
			width: auto;
			color: white;
			border-style: solid;
			display: inline;
			border-width: 0px 0px 1px 0px;
			background-color: #292929;
		}

		.hidden {
			position: absolute;
			left: -10000px;
			top: auto;
			width: 1px;
			height: 1px;
			overflow: hidden;
		}
	</style>

	<script type="text/javascript">
		var cfg_visible = false;

		function setCookie(cname, cvalue) {
			document.cookie = cname + "=" + cvalue + ";path=/";
		}

		function getCookie(cname) {
			var name = cname + "=";
			var decodedCookie = decodeURIComponent(document.cookie);
			var ca = decodedCookie.split(';');
			for(var i = 0; i <ca.length; i++) {
				var c = ca[i];
				while (c.charAt(0) == ' ') {
					c = c.substring(1);
				}
				if (c.indexOf(name) == 0) {
					return c.substring(name.length, c.length);
				}
			}
			return "";
		}

		function setLogo(path) {
			var img = document.getElementById("head-logo");
			img.src = path;
		}

		function setColor(tag, c) {
			var elements = document.getElementsByClassName(tag);
			var i;
		
			for (i = 0; i < elements.length; i++) {
				elements[i].style.color = c;
			} 
		}

		function setBackground() {
			var bg_link = "url('".concat(bg_path).concat("') no-repeat center center fixed");
			var body = document.getElementById("body");
			body.style.background = bg_link;
			//body.style.background-repeat = "no-repeat";
		}

		function setConfig(id, val) {
			var textField = document.getElementById(id);
			if (textField !== null)
				textField.value = val;
		}

		function toggleConfig() {
			if (!cfg_visible) {
				document.getElementById("sidebar").style.width = "250px";
				cfg_visible = true;
			} else {
				document.getElementById("sidebar").style.width = "0";
				cfg_visible = false;
			}
		}

		function onPickLinkColor(color, textBoxId, panelId) {
			var linkColorTextbox = document.getElementById(textBoxId);
			linkColorTextbox.value = color;
			document.getElementById(panelId).style.backgroundColor = color;
		}

		function selectColor(dialogId) {
			document.getElementById(dialogId).focus();
			document.getElementById(dialogId).value = document.getElementById("link-color-hex").value;
			document.getElementById(dialogId).click();
		}
	</script>
	<div class="main">
		<div class="center-container">
			
			<img class="search-img" id="head-logo" alt="Here should be a logo for your start page. Maybe you changed the path to an invalid file. Click cfg to change the path" src="../assets/img/search-logo.png">
			<form class="search-form" action="https://duckduckgo.com/">
				<input class="search-text" type="text" name="q">
			</form>
			<div class="quick-links">
				<ul>
					<li><a class="ql" href="https://www.youtube.com/feed/subscriptions" target="_blank">yt</a></li>
					<li><a class="ql" href="https://reddit.com/" target="_blank">reddit</a></li>
					<li><a class="ql" href="https://soundcloud.com" target="_blank">sc</a></li>
					<li><a class="ql" href="https://imgur.com" target="_blank">imgur</a></li>
					<li><a class="ql config-btn" onclick="toggleConfig()">cfg</a></li>
				</ul>
			</div>
		</div>

		<div id="sidebar" class="configbar">
			<h3>Configure this screen</h3>
			<a>Search logo link:</a>
			<input type="text" class="config-text" id="logo-value"/>
			<a>Background link:</a>
			<input type="text" class="config-text" id="bg-value"/>
			<a>Quick link color:</a>
			<div class="color-input">
				<input type="color" onchange="onPickLinkColor(this.value, 'link-color-hex', 'link-color-panel')" class="hidden" id="link-color-value"/>
				<div class="color-panel" id="link-color-panel" onclick="selectColor('link-color-value')"></div>
				<input type="text" onkeypress="onPickLinkColor(this.value, 'link-color-hex', 'link-color-panel')" class="config-color-hex" id="link-color-hex"/>
			</div>

			<a class="save-btn" onclick="applyConfig()">Save</a>
		</div>
	</div>

	<script type="text/javascript">
		// initialize config of search screen

		var img_path = getCookie("image_path");
		var bg_path  = getCookie("bg_path");
		var link_color = getCookie("link_color");

		if (img_path === "") img_path = "../assets/img/search-logo.png";
		if (bg_path === "") bg_path = "null";
		if (link_color === "") link_color = "#9ee2ff";

		function applyConfig() {
			// Load values
			img_path = document.getElementById("logo-value").value;
			bg_path = document.getElementById("bg-value").value;
			link_color = document.getElementById("link-color-hex").value;

			// Set cookies
			setCookie("image_path", img_path);
			setCookie("bg_path", bg_path);
			setCookie("link_color", link_color);
			
			// Apply values
			if (img_path == "")
				img_path = "../assets/img/search-logo.png";

			setLogo(img_path);
			
			if (bg_path !== "null") {
				setBackground(bg_path);
			}

			setColor("ql", link_color);
		}

		setConfig('logo-value', img_path);
		setConfig('bg-value', bg_path);
		onPickLinkColor(link_color, 'link-color-hex', 'link-color-panel')
			
		applyConfig();
	</script>
</body>
</html>